---

Neos:
  Flow:
    security:
      authentication:
        providers:
          'Neos.Neos:Backend':
            provider: Neos\Ldap\Security\Authentication\Provider\NeosBackendLdapProvider
            providerOptions:
              attributesFilter:
                account: ['dn']
                group: ['dn']

              baseDn: dc=my-domain,dc=com

              connection:
                bind:
                  dn: 'username@domain.com'
                  #dn: 'DOMAIN\user'
                  password: 'secret'

                options:
                  host: localhost
                  port: 389
                  options:
                    network_timeout: 10
                    protocol_version: 3
                    referrals: 0

              query:
                account: '(samaccountname=%s)'
                memberOf: '(member:1.2.840.113556.1.4.1941:=%s)'

  Ldap:
    roles:
      default:
        - 'Neos.Neos:RestrictedEditor'
      # map group memberships to roles
      groupMapping:
        'Neos.Neos:Administrator':
          - 'CN=Administrators,OU=Groups,DC=domain,DC=tld'
        'Neos.Neos:Editor':
          - 'CN=Editors,OU=Groups,DC=domain,DC=tld'
      # map certain users to roles
      userMapping:
        'Neos.Neos:Administrator':
          - 'CN=Admin,OU=Users,DC=domain,DC=tld'
        'Neos.Neos:Editor':
          - 'CN=Mustermann,OU=Users,DC=domain,DC=tld'
